const e=e=>{let t="",r=new Uint8Array(e),n=r.byteLength;for(let e=0;e<n;e++)t+=String.fromCharCode(r[e]);return window.btoa(t)},t=(t,r)=>{let n=e(r),o=document.createElement("a");o.setAttribute("href","data:application/pdf;base64,"+n),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},r=(e,t)=>new Promise((r,n)=>{setTimeout(()=>{n(Error("Timeout exceeded"))},1e4),QPDF.encrypt({logger:e=>{console.log(e)},arrayBuffer:e,userPassword:t,ownerPassword:t,callback:(e,t)=>{e?n(e):null===t?n(Error("Unknown error occured")):r(t)}})}),n=document.getElementById("message");document.getElementById("file").addEventListener("change",e=>{if(!window.File||!window.FileReader||!window.FileList||!window.Blob){alert("The File APIs are not fully supported in this browser.");return}let o=document.getElementById("password").value;if(0===o.length){alert("Password missing");return}let l="output.pdf",a=new FileReader;a.onload=async e=>{let a=new Uint8Array(e.target.result);n.innerText="Processing now. Please wait...";try{let e=await r(a,o);n.innerText="",t(`Encrypted ${l}`,e)}catch(e){n.innerText="Error occured.",alert(e);return}},1!==e.target.files.length?alert("More than one file was selected. Please select one file only."):"application/pdf"===e.target.files[0].type?(l=e.target.files[0].name,a.readAsArrayBuffer(e.target.files[0])):alert("Selected file does not appear to be a PDF")},!1);
//# sourceMappingURL=index.453862ae.js.map
